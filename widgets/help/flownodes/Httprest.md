<!-- Http Rest Widget Help Markdown -->
<br>

# Http Rest Node

___
<div class="column-container">
<div class="column row-container" style="width:65%">


## About
The HTTP REST flow widget is an input node used to accept incoming REST requests into Sensahub for processing in flows. Each HTTP REST flow widget represents a valid REST path and due to HTTP being stateless (no sessions), all HTTP requests will require authorisation by the device manager. Different REST paths can be supported by using multiple REST flow widgets, or using wildcards in the REST path.

</div>

<div class="column row-container">
<img src="/images/help/http_rest/httprest.png" width="112" height="63">
</div>
</div>

___

<div class="column-container">
<div class="column row-container">
<div class="row">

## Http Rest Properties
| Property | Description |
| -------- | ----------- |
| Model | Enter a divice model name, which combines with topic level, or JSON key to ensure a unique device identifier.​ |
| Path Level | Select the topic level to extract the unique device indentifier (usually 4th level  = instance name)​. |
| Json Key | Enter the JSON key(first level) to extract the uniqe device  indentifier.​ |
| Domain | Enter the URL domain that this node listens for eg. (demo_sensahub.com).​ |
| Path | Enter the URL path that this node listens for eg, sensor/*where* is a wildcard. |
| Method | Select incoming HTTP method to filther. |
| Return Result | Use a REST end flow widget to return the processed result as the REST response. |
| Data Location | Select where to find  parameters. |
| Format | Select format of the parameters. |
| Data | Key Name of the key that holds the data, or blank for no key (all string). |

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

## Authentication and Authorisation
1 A token is also required as a secret for authentication, either in the header (‘authorization’ field) or as a key ‘token’ in the header, query string, body JSON or body form.​ 
<br/>
2 The token expected from the sending device / system is generated by the token utility in the Sensahub settings and is based on the text in the category (2nd) and class (3rd) path levels.​
<br/>
3 To authorise a REST request, a unique ID representing the device or system is necessary.​ 
<br/>
4 This unique ID can either be part of the path in one of the path levels or key in the JSON body.​ The model field is also used as a group name to lookup the unique ID in the Device Manager.

<br/>
<br/>
<br/>

 ### Path  
 The path is a filter for incoming messages where paths that match the path setting and pass authentication will initiate a message flow as output of the flow widget.​ Paths have 5 levels representing <network>/<category>/<class>/<instance>/<scope>​ Wildcards (* or +) can be used to match a group of paths, and can be in any level of a path.

<br/>
<br/>
<br/>


### Data  ​
The data that is passed onto a flow can either be in the URL query string, HTTP header or body.​ Specify the name of the key to locate the data in the body JSON, form, header or query string.


</div>
 
</div>

<div class="column row-container">
<div class="row">
<img src="/images/help/http_rest/httprest_specific.png" width="150" height="659">
</div>
<div class="row">
<img src="/images/help/http_rest/httprest_path.png" width="150" height="160">
</div>
<div class="row">
<img src="/images/help/http_rest/httprest_path.png" width="150" height="160">
</div>
<div class="row">
<img src="/images/help/http_rest/httprest_method.png" width="150" height="142">
</div>
<div class="row">
<img src="/images/help/http_rest/httprest_format.png" width="150" height="108">
</div>
<div class="row">
<img src="/images/help/http_rest/httprest_data_location.png" width="150" height="109">
</div>
</div>
</div>

#### Tips
>Select the checkbox Return Result and use an end REST flow widget at the end of the REST flow to return the flow result back to the remote end as data.​
>The Sensahub URI defaults to a prefix of ‘api.’ to separate web requests from REST requests. This can be disabled in the WebServices.ini file (expectAPI setting)​

---