{"device":"DESKTOP","widgets":{"Scripting#1":{"t":"Scripting","lX":375,"lY":120,"sX":1,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"NOSCALE","x":"","y":"","width":"","height":""},"ver":"190104c190502","vis":false,"dis":false,"a":{"code editor":"//# sourceURL=config-script.js\n\n/**\n* Initialise script state (run once at startup)\n* @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n*/\nScript.on(\"load\", function(payload) {\n    try {\n    \t//var reqdata = {\"usrmeta\":\"getFileList\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":\"SYSTEM\"};\n        //request via ini management channel\n        var value = \"SYSTEM\";\n        var sysmeta = {\n            source: \"widget/settings\"\n        };\n        var usrmeta = \"getFileList\";\n        \n\t  \tSystem.publishToChannel(\"$sys/inimgmt/request/data\", \"string\", value, usrmeta); \n    } catch (ex) {\n        console.log('Script initialisation error: ' + ex);\n    }\n    return payload;\n});\n\n/**\n * Response to message from server channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nScript.on(\"server\", function(payload) {\n    try {\n      switch (payload.usrmeta.toUpperCase()) {\n        case \"GETFILELIST\":\n \t\t\tScript.sendToWidget(\"ConfName\", \"receive clear\", payload.label, payload.value, payload.sysmeta, payload.usrmeta);\n          \tbreak;\n        case \"CS\":\n            fw.func(\"loadCM\", \"<b>C# Code Editor</b>\");\n \t\t\tScript.sendToWidget(\"FileEditor\", \"receive value\", payload.label, payload.value, payload.sysmeta, payload.usrmeta);\n          \tfw.func(\"status\", \"Editing configuration\");\n          \tbreak;\n        case \"JS\":\n            fw.func(\"loadCM\", \"<b>Javascript Code Editor</b>\");\n \t\t\tScript.sendToWidget(\"FileEditor\", \"receive value\", payload.label, payload.value, payload.sysmeta, payload.usrmeta);\n          \tSystem.status(\"Editing configuration\");\n          \tbreak;\n        case \"INI\":\n            fw.func(\"loadCM\", \"<b>INI Configuration Editor</b>\");\n              //need to do this because scripting.html and IniEditor are out of sync with standards\n \t\t\tScript.sendToWidget(\"FileEditor\", \"receive value\", payload.label, payload.value, payload.sysmeta, payload.usrmeta);\n          \tSystem.status(\"Editing configuration\");\n          \tbreak;\n      }\n    } catch (ex) {\n       console.log('Script server channel error: ' + ex);\n    }\n    return payload;\n});\n\n/**\n * Response to message on client channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nScript.on(\"client\", function(payload) {\n    try {\n      \tvar reqdata;\n      \tswitch (payload.sysmeta.source) {\n      \t\t// Request server for list for the settings dropdown from type selected\n      \t\tcase \"widget/ConfType\":\n    \t\t\t//reqdata = {\"usrmeta\":\"getFileList\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":payload.value};\n\t  \t\t\tvar usrmeta = \"getFileList\";\n                var value = payload.value;\n                System.publishToChannel(\"$sys/inimgmt/request/data\", \"string\", value, usrmeta);\n        \t\tbreak;\n  \t\t\t// Request server for list for the settings dropdown from type selected\n            case \"widget/reload\":\n          \tcase \"widget/open\":\n    \t\t\t//reqdata = {\"usrmeta\":\"getFile\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":payload.value};\n\t  \t\t\tvar usrmeta = \"getFile\";\n                var value = payload.value;\n                System.publishToChannel(\"$sys/inimgmt/request/data\",\"string\", value, usrmeta);\n            \tbreak;           \n  \t\t\t// Request server for list for the settings dropdown from type selected\n          \tcase \"widget/save\":\n    \t\t\t////This is now handled by the client events.\n                //reqdata = {\"usrmeta\":\"saveFile\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":payload.value};\n\t  \t\t\t//System.publishToChannel(\"$sys/inimgmt/request/data\", reqdata);\n                break;\n        \tcase \"widget/restart\":\n\t\t\t\tif (confirm(\"WARNING - Please confirm you want to restart the server. This will logout all users and reset the server.\")) {\n          \t\t\tSystem.status(\"Resetting server, refresh the browser in 20 seconds to reconnect...\");\n    \t\t\t\treqdata = {\"usrmeta\":\"restart\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":\"restart\"};\n\t  \t\t\t\tvar value = \"restart\";\n                    var usrmeta = \"restart\";\n                    System.publishToChannel(\"$sys/inimgmt/request/data\", \"string\", value, usrmeta);\n        \t\t} else {\n          \t\t\tSystem.status(\"Server reset cancelled.\");\n                }\n          \t\tbreak;\n      \t\t}\n      \treturn payload;\n    } catch (ex) {\n       \tconsole.log('Script client channel error: ' + ex);\n    }\n});","script type":"javascript"},"ev":{"clientEvents":{"inputEvents":{"send to script":{"channel":"send to script/receive value","event":"receive value"}}},"serverEvents":{"inputEvents":{"Server Response":{"channel":"$SYS/INIMGMT/RESPONSE/DATA","event":"feed"},"New Event #2":{"channel":"$DB/ADMIN/MANAGE/Hello","event":"feed"}}}}},"Container#0":{"t":"Container","lX":8,"lY":260,"sX":3.48,"sY":1.2,"s":"Configurations","ps":{"enabled":"false","x":"0.74%","y":"21.19%","width":"32.01%","height":"9.78%","scalingType":"OK"},"ver":"190104c190502","z":"110","dis":false,"a":{"color":"grey","title":"Restart Server"},"ev":{}},"ConfType":{"t":"Dropdown","lX":36,"lY":76,"sX":2,"sY":1,"s":"Configurations","ps":{"enabled":"false","x":"1.52%","y":"6.11%","width":"8.44%","height":"3.24%","scalingType":"NOVERT"},"ver":"190104c190502","dis":false,"pr":"0","a":{"default options":"System, CS Plugins, CS Plugins Ini, JS Plugins, JS Plugins Ini","default value":"System"},"ev":{"clientEvents":{"inputEvents":{"get value":{"channel":"getvalues/getvalue","event":"getvalue"}},"outputEvents":{"Send To Script":{"channel":"send to script/receive value","event":"selected","trigger":"selected"}}}}},"ConfName":{"t":"Dropdown","lX":35,"lY":140,"sX":2.96,"sY":1,"s":"Configurations","ps":{"enabled":"false","x":"3.31%","y":"11.35%","width":"27.23%","height":"3.55%","scalingType":"NOVERT"},"ver":"190104c190502","dis":false,"pr":"1","a":{"default options":""},"ev":{"clientEvents":{"inputEvents":{"get value":{"channel":"getvalues/getvalue","event":"getvalue"}},"outputEvents":{}},"serverEvents":{"inputEvents":{"GET FILE LIST":{"channel":"$SYS/INIMGMT/RESPONSE/DATA","event":"feed"}}}}},"FileEditor":{"t":"IniEditor","lX":350,"lY":10,"sX":1,"sY":1,"s":"Configurations","ps":{"enabled":"false","x":"","y":"","width":"","height":"","scalingType":"NOSCALE"},"ver":"190104c190502","vis":false,"dis":false,"pr":"2","a":{},"ev":{"clientEvents":{"inputEvents":{"get value":{"channel":"getvalues/getvalue","event":"getvalue"},"save button pressed":{"channel":"file editor/save","event":"save"},"close button pressed":{"channel":"file editor/close","event":"close"}}},"serverEvents":{"outputEvents":{"save to server":{"channel":"$SYS/INIMGMT/REQUEST/DATA","event":"save","trigger":"save"}}}}},"Container#7":{"t":"Container","lX":8,"lY":12,"sX":3.48,"sY":2.52,"s":"Configurations","ps":{"enabled":"false","x":"0.74%","y":"0.98%","width":"32.01%","height":"20.54%","scalingType":"OK"},"ver":"190104c190502","z":"110","dis":false,"a":{"color":"grey","title":"Sensahub Configuration Editor"},"ev":{}},"Label#4":{"t":"Label","lX":40,"lY":56,"sX":1.44,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"13.35%","height":"2.02%","x":"8.8%","y":"54.61%"},"ver":"200124c190915","dis":false,"a":{"font size":"14","label text":"<font size=\"3\">Configuration Type</font>"},"ev":{}},"Label#5":{"t":"Label","lX":40,"lY":120,"sX":2.04,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"18.91%","height":"2.02%","x":"11.12%","y":"59.55%"},"ver":"200124c190915","dis":false,"a":{"font size":"14","label text":"<font size=\"3\">Configuration Name</font>"},"ev":{}},"open":{"t":"Button","lX":40,"lY":208,"sX":0.76,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"7.04%","height":"3.72%","x":"3.99%","y":"31.88%"},"ver":"190104c190915","dis":false,"a":{"color":"orange strong","button name":"Open","value on":"[#0]|[#1]"},"ev":{"clientEvents":{"outputEvents":{"Get Values":{"channel":"getvalues/getvalues(2)","event":"pressed","trigger":"pressed"},"Send To Script":{"channel":"send to script/receive value","event":"pressed","trigger":"pressed"}}}}},"close":{"t":"Button","lX":116,"lY":208,"sX":0.76,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"7.04%","height":"3.72%","x":"10.66%","y":"16.83%"},"ver":"190104c190915","dis":false,"a":{"color":"orange strong","button name":"Close","value on":""},"ev":{"clientEvents":{"outputEvents":{"Send To Script":{"channel":"send to script/receive value","event":"pressed","trigger":"pressed"},"close":{"channel":"file editor/close","event":"pressed","trigger":"pressed"}}}}},"save":{"t":"Button","lX":188,"lY":208,"sX":0.72,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"6.67%","height":"3.72%","x":"21.13%","y":"17.48%"},"ver":"190104c190915","dis":false,"a":{"color":"orange strong","button name":"Save","value on":"[#0]|[#1]|[#2]"},"ev":{"clientEvents":{"outputEvents":{"get values":{"channel":"getvalues/getvalues(3)","event":"pressed","trigger":"pressed"},"save file":{"channel":"file editor/save","event":"pressed","trigger":"pressed"}}}}},"reload":{"t":"Button","lX":264,"lY":208,"sX":0.72,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"6.67%","height":"3.72%","x":"25.3%","y":"16.83%"},"ver":"190104c190915","dis":false,"a":{"color":"orange strong","button name":"Reload","value on":"[#0]|[#1]"},"ev":{"clientEvents":{"outputEvents":{"get values":{"channel":"getvalues/getvalues(2)","event":"pressed","trigger":"pressed"},"send to script":{"channel":"send to script/receive value","event":"pressed","trigger":"pressed"}}}}},"restart":{"t":"Button","lX":44,"lY":312,"sX":0.88,"sY":1,"s":"Configurations","ps":{"enabled":"false","scalingType":"OK","width":"8.16%","height":"3.72%","x":"3.89%","y":"25.08%"},"ver":"190104c190915","dis":false,"a":{"color":"orange strong","button name":"Restart"},"ev":{"clientEvents":{"outputEvents":{"restart":{"channel":"send to script/receive value","event":"pressed","trigger":"pressed"}}}}},"Scripting#3":{"t":"Scripting","lX":580,"lY":15,"sX":1,"sY":1,"s":"Server Console","ps":{"enabled":false,"x":"","y":"","width":"","height":"","scalingType":"NOSCALE"},"ver":"190104c190502","z":"140","vis":false,"dis":false,"a":{"code editor":"//# sourceURL=console-script.js\n/**\n* Initialise script state (run once at startup)\n* @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n*/\nScript.on(\"load\", function(payload) {\n  //var reqdata = {\"usrmeta\":\"\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":\"\"};\n  //var value = \"\"\n  System.publishToChannel(\"$sys/console/logs/request\", \"string\", \"\");\n  return payload;\n});\n\n// Process keystrokes for console input\nScript.on(\"keypress\", function(keycode) {\n  \tvar reqdata = {\"usrmeta\":\"\",\"sysmeta\":{\"source\":\"widgets/settings\"},\"value\":keycode.toString()};\n\tvar value = keycode.toString();\n    System.publishToChannel(\"$sys/console/logs/key\", \"number\", value);  \n});\n\n\n/**\n * Response to message from server channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nScript.on(\"Server\", function(payload) {\n  \tvar value = {};\n    var label = \"sensacollection\";\n    value.headers = [\"Time\", \"Module\", \"Type\", \"Message\"];\n    \n    value.data = {};\n    value.pk = \"Time\";\n    \n  \tvar jsTime = new Date(payload.value.time);\n    //var time = jsTime.toLocaleTimeString().replace(\" AM\",\"\").replace(\" PM\",\"\") + \".\" + jsTime.getMilliseconds();\n    var time = jsTime.toLocaleTimeString([], {\"hour12\": false}) + \".\" + jsTime.getMilliseconds();\n\n    value.data[time] = [];\n    value.data[time][0] = jsTime.toLocaleTimeString([], {\"hour12\": false}) + \".\" + jsTime.getMilliseconds();\n    value.data[time][1] = payload.value.module;\n    value.data[time][2] = payload.value.type;\n    value.data[time][3] = payload.value.message;\n  \t\n    var color = \"grey\";\n  \tswitch (payload.value.type.toUpperCase()) {\n \t  case \"INFORMATION\":\n  \t\tcolor = \"#347C2C\";\n        break;\n      case \"WARNING\":\n  \t\t  \t\tcolor = \"#D4A017\";\n        break;\n      case \"ERROR\":\n  \t\t  \t\tcolor = \"#8C001A\";\n        break;\n      case \"CRITICAL\":\n  \t\tcolor = \"red\";\n        break;\n    }\n    \n\tScript.sendToWidget(\"console\", \"set text color\", \"string\", color);\n  \tScript.sendToWidget(\"console\", \"receive value\", label, value);\n    return payload;\n});\n\n/**\n * Response to message on client channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nScript.on(\"client\", function(payload) {\n    return payload;\n});","script type":"javascript"},"ev":{"serverEvents":{"inputEvents":{"New Event #0":{"channel":"$SYS/CONSOLE/LOGS/MSG","event":"feed"},"New Event #1":{"channel":"$SYS/CONSOLE/LOGS/REQUEST","event":"feed"}}}}},"Label#0":{"t":"Label","lX":16,"lY":92,"sX":4.76,"sY":1,"s":"Server Console","ps":{"enabled":false,"x":"1.11%","y":"7.46%","width":"35.18%","height":"2.03%","scalingType":"OK"},"ver":"190104c190502","dis":false,"a":{"font size":"14","label text":"<font color=\"#3a87ad\">Use keyboard keys&nbsp;for server console commands. Press 'H' for help.</font>"},"ev":{}},"Container#1":{"t":"Container","lX":12,"lY":12,"sX":3.48,"sY":2.76,"s":"Manage Users","ps":{"enabled":"false","x":"1.1%","y":"0.98%","width":"32.01%","height":"22.49%","scalingType":"OK"},"ver":"190104c190502","z":"110","dis":false,"a":{"title":"User Details","color":"grey"},"ev":{}},"Container#2":{"t":"Container","lX":360,"lY":12,"sX":2.08,"sY":2.76,"s":"Manage Users","ps":{"enabled":"false","x":"33.12%","y":"0.98%","width":"19.14%","height":"22.49%","scalingType":"OK"},"ver":"190104c190502","z":"110","dis":false,"a":{"title":"New Password","color":"grey"},"ev":{}},"Button#0":{"t":"Button","lX":244,"lY":224,"sX":1,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"a":{"color":"blue","button name":"Save","value on":"[#0]|[#1]|[#2]|[#3]|[#4]"},"ev":{"clientEvents":{"outputEvents":{"get form":{"channel":"form/getvalue(5)","event":"pressed","trigger":"pressed"},"script":{"channel":"script/receive value","event":"pressed","trigger":"pressed"}}}}},"Button#1":{"t":"Button","lX":148,"lY":224,"sX":1,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"a":{"button name":"Delete","value on":"[#0]"},"ev":{"clientEvents":{"outputEvents":{"delete user":{"channel":"delete/getvalue(1)","event":"pressed","trigger":"pressed"},"delete row":{"channel":"delete row/delete row","event":"pressed","trigger":"pressed"}}}}},"Form +":{"t":"Scripting","lX":604,"lY":0,"sX":1,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"a":{"code editor":"//# sourceURL=dynamic-script.js\n/**\n* Initialise script state (run once at startup)\n* @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n*/\nscriptData.initialise = function(payload) {\n    return payload;\n};\n\n/**\n * Response to message from server channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nscriptData.serverChannel = function(payload) {\n    return payload;\n};\n\n/**\n * Response to message on client channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nscriptData.clientChannel = function(payload) {\n    // Spit payload data.\n    // Username, password, retype password, firstname, lastname, email, mobile.\n  \tvar data = payload.data.value.split('|');\n  \n  \t// Validate form data.\n  \tif (data[0] === \"\") {\n        alert(\"Please fill out all fields.\")\n     \treturn payload; \n    }\n  \n  \t// Build object to send to table\n    var record = {\n    \t\"username\": data[0],\n        \"first name\": data[1],\n        \"last name\": data[2],\n        \"mobile\": data[4],\n        \"email\": data[3]\n    };\n\n\tpayload.data.value = {};\n    payload.data.value[data[0]] = record;\n    sendToWidget(\"UserTable\", \"receive value\", payload.data);\n  \n  \t// clear from\n  \tpayload.data.value = \"\";\n    sendToWidget(\"usernameInput\", \"receive value\", payload.data);\n    sendToWidget(\"fNameInput\", \"receive value\", payload.data);\n    sendToWidget(\"lNameInput\", \"receive value\", payload.data);\n    sendToWidget(\"emailInput\", \"receive value\", payload.data);\n    sendToWidget(\"mobileInput\", \"receive value\", payload.data);\n  \n   \t//  Write to database\n  \tparent.parent.publishSvr(\"$db/directory/users/READRECS\", reqdata); //request via ini management channel\n    return payload;\n};"},"ev":{"clientEvents":{"inputEvents":{"add":{"channel":"script/receive value","event":"receive value"}}}}},"UserTable":{"t":"Table","lX":12,"lY":300,"sX":21.67,"sY":4.96,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"a":{"enable scaling":"true","width":"85%","display header":"true","title":"All Users","append":"false","columns":"Username,First Name,Last Name,Mobile,Email","colWidths":"0.16775396085740912,0.1798695246971109,0.18080149114631874,0.1863932898415657,0.2851817334575955,0.16775396085740912,0.1798695246971109,0.18080149114631874,0.1863932898415657,0.2851817334575955,0.16775396085740912,0.1798695246971109,0.18080149114631874,0.1863932898415657,0.2851817334575955,0.16775396085740912,0.1798695246971109,0.18080149114631874,0.1863932898415657,0.2851817334575955,0.16775396085740912,0.1798695246971109,0.18080149114631874,0.1863932898415657,0.2851817334575955,"},"ev":{"clientEvents":{"inputEvents":{"delete row":{"channel":"delete row/delete row","event":"delete row"}},"outputEvents":{"row sel":{"channel":"row sel/receive value","event":"Pressed","trigger":"Pressed"}}}}},"usernameInput":{"t":"Input","lX":20,"lY":36,"sX":3.28,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"pr":"0","a":{"placeholder":"Username","color":"grey"},"ev":{"clientEvents":{"inputEvents":{"add form":{"channel":"form/getvalue","event":"getvalue"},"pk":{"channel":"delete/getvalue","event":"getvalue"},"clear":{"channel":"clear/receive value","event":"receive value"}}}}},"fNameInput":{"t":"Input","lX":20,"lY":72,"sX":3.28,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"pr":"1","a":{"placeholder":"First Name","color":"grey"},"ev":{"clientEvents":{"inputEvents":{"add form":{"channel":"form/getvalue","event":"getvalue"},"clear":{"channel":"clear/receive value","event":"receive value"}}}}},"lNameInput":{"t":"Input","lX":20,"lY":108,"sX":3.28,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"pr":"2","a":{"placeholder":"Last Name","color":"grey"},"ev":{"clientEvents":{"inputEvents":{"add form":{"channel":"form/getvalue","event":"getvalue"},"clear":{"channel":"clear/receive value","event":"receive value"}}}}},"emailInput":{"t":"Input","lX":20,"lY":144,"sX":3.28,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"pr":"3","a":{"placeholder":"Email","color":"grey","type":"email"},"ev":{"clientEvents":{"inputEvents":{"add form":{"channel":"form/getvalue","event":"getvalue"},"clear":{"channel":"clear/receive value","event":"receive value"}}}}},"mobileInput":{"t":"Input","lX":20,"lY":180,"sX":3.28,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","dis":false,"pr":"4","a":{"placeholder":"Mobile","color":"grey","type":"number"},"ev":{"clientEvents":{"inputEvents":{"add form":{"channel":"form/getvalue","event":"getvalue"},"clear":{"channel":"clear/receive value","event":"receive value"}}}}},"row sel":{"t":"Scripting","lX":600,"lY":100,"sX":1,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":"","scalingType":"NOSCALE"},"ver":"190104c190502","vis":false,"dis":false,"a":{"code editor":"//# sourceURL=dynamic-script.js\n/**\n* Initialise script state (run once at startup)\n* @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n*/\nscriptData.initialise = function(payload) {\n    return payload;\n};\n\n/**\n * Response to message from server channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nscriptData.serverChannel = function(payload) {\n    return payload;\n};\n\n/**\n * Response to message on client channel\n * @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n */\nscriptData.clientChannel = function(payload) {\n    var pks = Object.keys(payload.data.value);\n \tvar row = payload.data.value[pks[0]];\n  \tvar data = payload.data;\n\tdata.value = row.username;\n  \tsendToWidget(\"usernameInput\", \"receive value\", data);\n    data.value = row[\"first name\"]\n    sendToWidget(\"fNameInput\", \"receive value\", data);\n  \tdata.value = row[\"last name\"];\n    sendToWidget(\"lNameInput\", \"receive value\", data);\n    data.value = row[\"email\"];\n    sendToWidget(\"emailInput\", \"receive value\", data);\n    data.value = row[\"mobile\"];\n    sendToWidget(\"mobileInput\", \"receive value\", data);  \n    return payload;\n};","script type":"javascript"},"ev":{"clientEvents":{"inputEvents":{"row selected":{"channel":"row sel/receive value","event":"receive value"}}}}},"Button#2":{"t":"Button","lX":256,"lY":376,"sX":1,"sY":1,"s":"Manage Users","ps":{"enabled":"false","x":"","y":"","width":"","height":""},"ver":"190104c190502","z":"110","dis":false,"a":{"button name":"Press"},"ev":{}},"Scripting#0":{"t":"Scripting","lX":20,"lY":404,"sX":1,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"NOSCALE","x":"","y":"","width":"","height":""},"ver":"190104c190502","vis":false,"dis":false,"a":{"code editor":"//# sourceURL=general-script.js\n/**\n* Initialise script state (run once at startup)\n* @param {payload} Event data received (payload.channel, payload.data.value, payload.data.usrmeta).\n*/\nScript.on(\"load\", function(payload) {\n    return payload;\n});\n\nScript.on(\"server\", function(payload) {\n    var channelSplit = payload.sysmeta.channel.split(\"/\");\n    switch (channelSplit[channelSplit.length -1].toUpperCase()) {\n            case \"SENSORTOKEN\":\n            Script.sendToWidget(\"display\", \"receive value\", payload.value);\n            break;\n    }\n    return payload;\n});\n\nScript.on(\"client\", function (payload) {\n    switch (payload.sysmeta.source.toUpperCase()) {\n        case \"WIDGET/GENERATE\":\n            var arr = payload.value.split(\"/\");\n            System.generateSensorToken(arr[0], arr[1]);\n            break;\n    }\n    //return payload;\n});","script type":"javascript"},"ev":{"clientEvents":{"inputEvents":{"Generate":{"channel":"scripting/receive value","event":"receive value"}}},"serverEvents":{"inputEvents":{"Server stuff":{"channel":"$SYS/SECURITY/TOKEN/SENSORTOKEN","event":"feed"}}}}},"console":{"t":"Table","lX":14,"lY":164,"sX":13.88,"sY":9.03,"s":"Server Console","ps":{"enabled":true,"scalingType":"OK","width":"98%","height":"74.94%","x":"1%","y":"13.61%"},"ver":"190104c190915","dis":false,"a":{"display header":"true","title":"Console","text color":"#000000","columns":"Time ,Module, Type, Message","colWidths":""},"ev":{"clientEvents":{"inputEvents":{"Receive From Script":{"channel":"console/receive value","event":"receive value"}}}}},"Container#3":{"t":"Container","lX":8,"lY":52,"sX":3.08,"sY":3.16,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"OK","width":"28.33%","height":"25.61%","x":"1.1%","y":"3.4%"},"ver":"190104c190915","z":"110","dis":false,"a":{"title":"Generate Sensor Token"},"ev":{}},"generate":{"t":"Button","lX":24,"lY":228,"sX":2.68,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"OK","width":"24.66%","height":"3.73%","x":"4.14%","y":"18.31%"},"ver":"190104c190915","dis":false,"a":{"button name":"Generate","value on":"[#0]/[#1]"},"ev":{"clientEvents":{"outputEvents":{"Send Press To Script":{"channel":"scripting/receive value","event":"pressed","trigger":"pressed"},"New Event #1":{"channel":"generate/getvalue(2)","event":"pressed","trigger":"pressed"}}}}},"display":{"t":"Input","lX":24,"lY":304,"sX":2.72,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"NOVERT","width":"25.02%","height":"3.24%","x":"2.21%","y":"14.34%"},"ver":"190104c190915","dis":false,"a":{"disable editing":"true"},"ev":{"clientEvents":{"inputEvents":{"recv from script":{"channel":"scripting/receive value","event":"receive value"}}}}},"Input#0":{"t":"Input","lX":20,"lY":172,"sX":2.72,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"NOVERT","width":"25.02%","height":"3.24%","x":"1.93%","y":"14.02%"},"ver":"190104c190915","dis":false,"pr":"1","a":{},"ev":{"clientEvents":{"inputEvents":{"New Event #0":{"channel":"generate/getvalue","event":"getvalue"}}}}},"Input#1":{"t":"Input","lX":20,"lY":108,"sX":2.72,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"NOVERT","width":"25.02%","height":"3.24%","x":"1.84%","y":"8.43%"},"ver":"190104c190915","dis":false,"pr":"0","a":{},"ev":{"clientEvents":{"inputEvents":{"New Event #0":{"channel":"generate/getvalue","event":"getvalue"}}}}},"Label#1":{"t":"Label","lX":24,"lY":84,"sX":1,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"a":{"font size":"14","label text":"<b>Category</b>"},"ev":{}},"Label#2":{"t":"Label","lX":24,"lY":152,"sX":1,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"OK","width":"","height":"","x":"","y":""},"ver":"200124c190915","dis":false,"a":{"font size":"14","label text":"<b>Class</b>"},"ev":{}},"Label#3":{"t":"Label","lX":28,"lY":280,"sX":1,"sY":1,"s":"Manage Sensors","ps":{"enabled":"false","scalingType":"OK","width":"9.2%","height":"2.03%","x":"2.58%","y":"25.61%"},"ver":"200124c190915","dis":false,"a":{"font size":"14","label text":"<b>Token</b>"},"ev":{}}},"screens":{"Configurations":{"index":0,"icon":"settings","meta":""},"Server Console":{"index":1,"icon":"computer","meta":""},"Manage Users":{"index":2,"icon":"person","meta":""},"Manage Sensors":{"index":3,"icon":"wifi_tethering","meta":""}},"meta":""}